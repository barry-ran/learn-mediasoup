<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1220px" preserveAspectRatio="none" style="width:4359px;height:1220px;" version="1.1" viewBox="0 0 4359 1220" width="4359px" zoomAndPan="magnify"><defs><filter height="300%" id="f1nyfbzm83wleq" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--MD5=[fc539fa3f3b7db9b31467e896d367b3b]
class Device--><rect codeLine="1" fill="#FEFECE" filter="url(#f1nyfbzm83wleq)" height="124.8281" id="Device" style="stroke: #A80036; stroke-width: 1.5;" width="459" x="2139.5" y="7"/><ellipse cx="2343.75" cy="23" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M2346.0938,18.6719 C2345.1563,18.2344 2344.5625,18.0938 2343.6875,18.0938 C2341.0625,18.0938 2339.0625,20.1719 2339.0625,22.8906 L2339.0625,24.0156 C2339.0625,26.5938 2341.1719,28.4844 2344.0625,28.4844 C2345.2813,28.4844 2346.4375,28.1875 2347.1875,27.6406 C2347.7656,27.2344 2348.0938,26.7813 2348.0938,26.3906 C2348.0938,25.9375 2347.7031,25.5469 2347.2344,25.5469 C2347.0156,25.5469 2346.8125,25.625 2346.625,25.8125 C2346.1719,26.2969 2346.1719,26.2969 2345.9844,26.3906 C2345.5625,26.6563 2344.875,26.7813 2344.1094,26.7813 C2342.0625,26.7813 2340.7656,25.6875 2340.7656,23.9844 L2340.7656,22.8906 C2340.7656,21.1094 2342.0156,19.7969 2343.75,19.7969 C2344.3281,19.7969 2344.9375,19.9531 2345.4063,20.2031 C2345.8906,20.4844 2346.0625,20.7031 2346.1563,21.1094 C2346.2188,21.5156 2346.25,21.6406 2346.3906,21.7656 C2346.5313,21.9063 2346.7656,22.0156 2346.9844,22.0156 C2347.25,22.0156 2347.5156,21.875 2347.6875,21.6563 C2347.7969,21.5 2347.8281,21.3125 2347.8281,20.8906 L2347.8281,19.4688 C2347.8281,19.0313 2347.8125,18.9063 2347.7188,18.75 C2347.5625,18.4844 2347.2813,18.3438 2346.9844,18.3438 C2346.6875,18.3438 2346.4844,18.4375 2346.2656,18.75 L2346.0938,18.6719 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="42" x="2364.25" y="27.1543">Device</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="2140.5" x2="2597.5" y1="39" y2="39"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="303" x="2145.5" y="53.2104">代表连接到mediasoup router以发送和/或接收媒体的端点。</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="184" x="2145.5" y="66.0151">这是C ++客户端应用程序的切入点。</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="447" x="2145.5" y="78.8198">主要功能是创建SendTransport/RecvTransport, 加载服务端rtp能力，生成本地rtp能力等</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="416" x="2145.5" y="91.6245">https://mediasoup.org/documentation/v3/libmediasoupclient/api/#Device</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="2140.5" x2="2597.5" y1="98.2188" y2="98.2188"/><ellipse cx="2150.5" cy="109.2188" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="130" x="2159.5" y="112.4292">CreateSendTransport()</text><ellipse cx="2150.5" cy="122.0234" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="128" x="2159.5" y="125.2339">CreateRecvTransport()</text><!--MD5=[a83d828be13d333e1fddb3d4d9d97191]
class Handler--><rect codeLine="11" fill="#FEFECE" filter="url(#f1nyfbzm83wleq)" height="120.0234" id="Handler" style="stroke: #A80036; stroke-width: 1.5;" width="409" x="2167.5" y="574"/><ellipse cx="2344.25" cy="590" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M2346.5938,585.6719 C2345.6563,585.2344 2345.0625,585.0938 2344.1875,585.0938 C2341.5625,585.0938 2339.5625,587.1719 2339.5625,589.8906 L2339.5625,591.0156 C2339.5625,593.5938 2341.6719,595.4844 2344.5625,595.4844 C2345.7813,595.4844 2346.9375,595.1875 2347.6875,594.6406 C2348.2656,594.2344 2348.5938,593.7813 2348.5938,593.3906 C2348.5938,592.9375 2348.2031,592.5469 2347.7344,592.5469 C2347.5156,592.5469 2347.3125,592.625 2347.125,592.8125 C2346.6719,593.2969 2346.6719,593.2969 2346.4844,593.3906 C2346.0625,593.6563 2345.375,593.7813 2344.6094,593.7813 C2342.5625,593.7813 2341.2656,592.6875 2341.2656,590.9844 L2341.2656,589.8906 C2341.2656,588.1094 2342.5156,586.7969 2344.25,586.7969 C2344.8281,586.7969 2345.4375,586.9531 2345.9063,587.2031 C2346.3906,587.4844 2346.5625,587.7031 2346.6563,588.1094 C2346.7188,588.5156 2346.75,588.6406 2346.8906,588.7656 C2347.0313,588.9063 2347.2656,589.0156 2347.4844,589.0156 C2347.75,589.0156 2348.0156,588.875 2348.1875,588.6563 C2348.2969,588.5 2348.3281,588.3125 2348.3281,587.8906 L2348.3281,586.4688 C2348.3281,586.0313 2348.3125,585.9063 2348.2188,585.75 C2348.0625,585.4844 2347.7813,585.3438 2347.4844,585.3438 C2347.1875,585.3438 2346.9844,585.4375 2346.7656,585.75 L2346.5938,585.6719 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="47" x="2364.75" y="594.1543">Handler</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="2168.5" x2="2575.5" y1="606" y2="606"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="355" x="2173.5" y="620.2104">对PeerConnection进一步封装，区分offer/answer PeerConnection</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="2168.5" x2="2575.5" y1="626.8047" y2="626.8047"/><ellipse cx="2178.5" cy="637.8047" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="383" x="2187.5" y="641.0151">GetNativeRtpCapabilities() 通过临时创建一个offer的方式获得本地rtp能力</text><ellipse cx="2178.5" cy="650.6094" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="318" x="2187.5" y="653.8198">UpdateIceServers() 重新设置PeerConnection的ice server</text><ellipse cx="2178.5" cy="663.4141" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="156" x="2187.5" y="666.6245">Close() 关闭PeerConnection</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="2168.5" x2="2575.5" y1="673.2188" y2="673.2188"/><rect fill="#F24D5C" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="2175.5" y="681.2188"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="336" x="2187.5" y="687.4292">SetupTransport() 更新sdp信息中 dtls传输角色（client/server）</text><!--MD5=[de0652411a5583e53a86190076ac1bf7]
class RecvHandler--><rect codeLine="21" fill="#FEFECE" filter="url(#f1nyfbzm83wleq)" height="86.4141" id="RecvHandler" style="stroke: #A80036; stroke-width: 1.5;" width="804" x="2553" y="375.5"/><ellipse cx="2912.75" cy="391.5" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M2915.0938,387.1719 C2914.1563,386.7344 2913.5625,386.5938 2912.6875,386.5938 C2910.0625,386.5938 2908.0625,388.6719 2908.0625,391.3906 L2908.0625,392.5156 C2908.0625,395.0938 2910.1719,396.9844 2913.0625,396.9844 C2914.2813,396.9844 2915.4375,396.6875 2916.1875,396.1406 C2916.7656,395.7344 2917.0938,395.2813 2917.0938,394.8906 C2917.0938,394.4375 2916.7031,394.0469 2916.2344,394.0469 C2916.0156,394.0469 2915.8125,394.125 2915.625,394.3125 C2915.1719,394.7969 2915.1719,394.7969 2914.9844,394.8906 C2914.5625,395.1563 2913.875,395.2813 2913.1094,395.2813 C2911.0625,395.2813 2909.7656,394.1875 2909.7656,392.4844 L2909.7656,391.3906 C2909.7656,389.6094 2911.0156,388.2969 2912.75,388.2969 C2913.3281,388.2969 2913.9375,388.4531 2914.4063,388.7031 C2914.8906,388.9844 2915.0625,389.2031 2915.1563,389.6094 C2915.2188,390.0156 2915.25,390.1406 2915.3906,390.2656 C2915.5313,390.4063 2915.7656,390.5156 2915.9844,390.5156 C2916.25,390.5156 2916.5156,390.375 2916.6875,390.1563 C2916.7969,390 2916.8281,389.8125 2916.8281,389.3906 L2916.8281,387.9688 C2916.8281,387.5313 2916.8125,387.4063 2916.7188,387.25 C2916.5625,386.9844 2916.2813,386.8438 2915.9844,386.8438 C2915.6875,386.8438 2915.4844,386.9375 2915.2656,387.25 L2915.0938,387.1719 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="76" x="2933.25" y="395.6543">RecvHandler</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="2554" x2="3356" y1="407.5" y2="407.5"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="558" x="2559" y="421.7104">创建answer类型的PeerConnectionInterface，返回RtpReceiverInterface和MediaStreamTrackInterface</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="2554" x2="3356" y1="428.3047" y2="428.3047"/><ellipse cx="2564" cy="439.3047" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="778" x="2573" y="442.5151">Receive() 根据参数使用remoteSdp创建远端sdp，并通过SetRemoteDescription设置到pc，创建answer，获取transceiver和track，设置本地sdp信息</text><ellipse cx="2564" cy="452.1094" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="426" x="2573" y="455.3198">ReceiveDataChannel() 创建DataChannel，创建answer，设置本地/远端sdp信息</text><!--MD5=[25ee9ee29e81b94b9a79f151628afb4f]
class MediaSection--><rect codeLine="28" fill="#FEFECE" filter="url(#f1nyfbzm83wleq)" height="112.0234" id="MediaSection" style="stroke: #A80036; stroke-width: 1.5;" width="483" x="2130.5" y="960"/><ellipse cx="2327.25" cy="976" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M2329.5938,971.6719 C2328.6563,971.2344 2328.0625,971.0938 2327.1875,971.0938 C2324.5625,971.0938 2322.5625,973.1719 2322.5625,975.8906 L2322.5625,977.0156 C2322.5625,979.5938 2324.6719,981.4844 2327.5625,981.4844 C2328.7813,981.4844 2329.9375,981.1875 2330.6875,980.6406 C2331.2656,980.2344 2331.5938,979.7813 2331.5938,979.3906 C2331.5938,978.9375 2331.2031,978.5469 2330.7344,978.5469 C2330.5156,978.5469 2330.3125,978.625 2330.125,978.8125 C2329.6719,979.2969 2329.6719,979.2969 2329.4844,979.3906 C2329.0625,979.6563 2328.375,979.7813 2327.6094,979.7813 C2325.5625,979.7813 2324.2656,978.6875 2324.2656,976.9844 L2324.2656,975.8906 C2324.2656,974.1094 2325.5156,972.7969 2327.25,972.7969 C2327.8281,972.7969 2328.4375,972.9531 2328.9063,973.2031 C2329.3906,973.4844 2329.5625,973.7031 2329.6563,974.1094 C2329.7188,974.5156 2329.75,974.6406 2329.8906,974.7656 C2330.0313,974.9063 2330.2656,975.0156 2330.4844,975.0156 C2330.75,975.0156 2331.0156,974.875 2331.1875,974.6563 C2331.2969,974.5 2331.3281,974.3125 2331.3281,973.8906 L2331.3281,972.4688 C2331.3281,972.0313 2331.3125,971.9063 2331.2188,971.75 C2331.0625,971.4844 2330.7813,971.3438 2330.4844,971.3438 C2330.1875,971.3438 2329.9844,971.4375 2329.7656,971.75 L2329.5938,971.6719 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="81" x="2347.75" y="980.1543">MediaSection</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="2131.5" x2="2612.5" y1="992" y2="992"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="122" x="2136.5" y="1006.2104">媒体部分json数据的封装</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="471" x="2136.5" y="1019.0151">主要是对json格式的iceParameters（user&amp;password）和iceCandidates的保存和便捷操作</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="2131.5" x2="2612.5" y1="1025.6094" y2="1025.6094"/><ellipse cx="2141.5" cy="1036.6094" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="48" x="2150.5" y="1039.8198">GetMid()</text><ellipse cx="2141.5" cy="1049.4141" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="110" x="2150.5" y="1052.6245">SetIceParameters()</text><ellipse cx="2141.5" cy="1062.2188" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="75" x="2150.5" y="1065.4292">SetDtlsRole()</text><!--MD5=[1d1e91201635a21488c8af255991ce5b]
class AnswerMediaSection--><rect codeLine="37" fill="#FEFECE" filter="url(#f1nyfbzm83wleq)" height="73.6094" id="AnswerMediaSection" style="stroke: #A80036; stroke-width: 1.5;" width="574" x="1781" y="1133"/><ellipse cx="2000.75" cy="1149" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M2003.0938,1144.6719 C2002.1563,1144.2344 2001.5625,1144.0938 2000.6875,1144.0938 C1998.0625,1144.0938 1996.0625,1146.1719 1996.0625,1148.8906 L1996.0625,1150.0156 C1996.0625,1152.5938 1998.1719,1154.4844 2001.0625,1154.4844 C2002.2813,1154.4844 2003.4375,1154.1875 2004.1875,1153.6406 C2004.7656,1153.2344 2005.0938,1152.7813 2005.0938,1152.3906 C2005.0938,1151.9375 2004.7031,1151.5469 2004.2344,1151.5469 C2004.0156,1151.5469 2003.8125,1151.625 2003.625,1151.8125 C2003.1719,1152.2969 2003.1719,1152.2969 2002.9844,1152.3906 C2002.5625,1152.6563 2001.875,1152.7813 2001.1094,1152.7813 C1999.0625,1152.7813 1997.7656,1151.6875 1997.7656,1149.9844 L1997.7656,1148.8906 C1997.7656,1147.1094 1999.0156,1145.7969 2000.75,1145.7969 C2001.3281,1145.7969 2001.9375,1145.9531 2002.4063,1146.2031 C2002.8906,1146.4844 2003.0625,1146.7031 2003.1563,1147.1094 C2003.2188,1147.5156 2003.25,1147.6406 2003.3906,1147.7656 C2003.5313,1147.9063 2003.7656,1148.0156 2003.9844,1148.0156 C2004.25,1148.0156 2004.5156,1147.875 2004.6875,1147.6563 C2004.7969,1147.5 2004.8281,1147.3125 2004.8281,1146.8906 L2004.8281,1145.4688 C2004.8281,1145.0313 2004.8125,1144.9063 2004.7188,1144.75 C2004.5625,1144.4844 2004.2813,1144.3438 2003.9844,1144.3438 C2003.6875,1144.3438 2003.4844,1144.4375 2003.2656,1144.75 L2003.0938,1144.6719 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="126" x="2021.25" y="1153.1543">AnswerMediaSection</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1782" x2="2354" y1="1165" y2="1165"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="144" x="1787" y="1179.2104">应答媒体部分json数据的封装</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="562" x="1787" y="1192.0151">主要是对json格式的iceParameters/iceCandidates/dtlsParameters/sctpParameters/codecOptions的保存</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="1782" x2="2354" y1="1198.6094" y2="1198.6094"/><!--MD5=[5d76e89e8053eb0b7bb70ea2ffab3f67]
class OfferMediaSection--><rect codeLine="43" fill="#FEFECE" filter="url(#f1nyfbzm83wleq)" height="73.6094" id="OfferMediaSection" style="stroke: #A80036; stroke-width: 1.5;" width="574" x="2390" y="1133"/><ellipse cx="2616.75" cy="1149" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M2619.0938,1144.6719 C2618.1563,1144.2344 2617.5625,1144.0938 2616.6875,1144.0938 C2614.0625,1144.0938 2612.0625,1146.1719 2612.0625,1148.8906 L2612.0625,1150.0156 C2612.0625,1152.5938 2614.1719,1154.4844 2617.0625,1154.4844 C2618.2813,1154.4844 2619.4375,1154.1875 2620.1875,1153.6406 C2620.7656,1153.2344 2621.0938,1152.7813 2621.0938,1152.3906 C2621.0938,1151.9375 2620.7031,1151.5469 2620.2344,1151.5469 C2620.0156,1151.5469 2619.8125,1151.625 2619.625,1151.8125 C2619.1719,1152.2969 2619.1719,1152.2969 2618.9844,1152.3906 C2618.5625,1152.6563 2617.875,1152.7813 2617.1094,1152.7813 C2615.0625,1152.7813 2613.7656,1151.6875 2613.7656,1149.9844 L2613.7656,1148.8906 C2613.7656,1147.1094 2615.0156,1145.7969 2616.75,1145.7969 C2617.3281,1145.7969 2617.9375,1145.9531 2618.4063,1146.2031 C2618.8906,1146.4844 2619.0625,1146.7031 2619.1563,1147.1094 C2619.2188,1147.5156 2619.25,1147.6406 2619.3906,1147.7656 C2619.5313,1147.9063 2619.7656,1148.0156 2619.9844,1148.0156 C2620.25,1148.0156 2620.5156,1147.875 2620.6875,1147.6563 C2620.7969,1147.5 2620.8281,1147.3125 2620.8281,1146.8906 L2620.8281,1145.4688 C2620.8281,1145.0313 2620.8125,1144.9063 2620.7188,1144.75 C2620.5625,1144.4844 2620.2813,1144.3438 2619.9844,1144.3438 C2619.6875,1144.3438 2619.4844,1144.4375 2619.2656,1144.75 L2619.0938,1144.6719 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="112" x="2637.25" y="1153.1543">OfferMediaSection</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="2391" x2="2963" y1="1165" y2="1165"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="144" x="2396" y="1179.2104">应答媒体部分json数据的封装</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="562" x="2396" y="1192.0151">主要是对json格式的iceParameters/iceCandidates/dtlsParameters/sctpParameters/codecOptions的保存</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="2391" x2="2963" y1="1198.6094" y2="1198.6094"/><!--MD5=[191cc812dbf1dee5553d8c8087b215c2]
class RemoteSdp--><rect codeLine="49" fill="#FEFECE" filter="url(#f1nyfbzm83wleq)" height="112.0234" id="RemoteSdp" style="stroke: #A80036; stroke-width: 1.5;" width="709" x="2017.5" y="787"/><ellipse cx="2332.75" cy="803" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M2335.0938,798.6719 C2334.1563,798.2344 2333.5625,798.0938 2332.6875,798.0938 C2330.0625,798.0938 2328.0625,800.1719 2328.0625,802.8906 L2328.0625,804.0156 C2328.0625,806.5938 2330.1719,808.4844 2333.0625,808.4844 C2334.2813,808.4844 2335.4375,808.1875 2336.1875,807.6406 C2336.7656,807.2344 2337.0938,806.7813 2337.0938,806.3906 C2337.0938,805.9375 2336.7031,805.5469 2336.2344,805.5469 C2336.0156,805.5469 2335.8125,805.625 2335.625,805.8125 C2335.1719,806.2969 2335.1719,806.2969 2334.9844,806.3906 C2334.5625,806.6563 2333.875,806.7813 2333.1094,806.7813 C2331.0625,806.7813 2329.7656,805.6875 2329.7656,803.9844 L2329.7656,802.8906 C2329.7656,801.1094 2331.0156,799.7969 2332.75,799.7969 C2333.3281,799.7969 2333.9375,799.9531 2334.4063,800.2031 C2334.8906,800.4844 2335.0625,800.7031 2335.1563,801.1094 C2335.2188,801.5156 2335.25,801.6406 2335.3906,801.7656 C2335.5313,801.9063 2335.7656,802.0156 2335.9844,802.0156 C2336.25,802.0156 2336.5156,801.875 2336.6875,801.6563 C2336.7969,801.5 2336.8281,801.3125 2336.8281,800.8906 L2336.8281,799.4688 C2336.8281,799.0313 2336.8125,798.9063 2336.7188,798.75 C2336.5625,798.4844 2336.2813,798.3438 2335.9844,798.3438 C2335.6875,798.3438 2335.4844,798.4375 2335.2656,798.75 L2335.0938,798.6719 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="70" x="2353.25" y="807.1543">RemoteSdp</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="2018.5" x2="2725.5" y1="819" y2="819"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="230" x="2023.5" y="833.2104">保存json格式的sdp信息，管理MediaSection</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="697" x="2023.5" y="846.0151">Remote表示RemoteSdp存储的是对端pc的sdp信息，最终RemoteSdp被用来本地PeerConnectionInterface::SetRemoteDescription</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="2018.5" x2="2725.5" y1="852.6094" y2="852.6094"/><ellipse cx="2028.5" cy="863.6094" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="201" x="2037.5" y="866.8198">Send()创建一个AnswerMediaSection</text><ellipse cx="2028.5" cy="876.4141" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="205" x="2037.5" y="879.6245">Receive()创建一个OfferMediaSection</text><ellipse cx="2028.5" cy="889.2188" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="175" x="2037.5" y="892.4292">GetSdp() 获取sdp信息的json对象</text><!--MD5=[ea193e58bf01a8bb640ee5c4ebd1a9a0]
class Transport--><rect codeLine="58" fill="#FEFECE" filter="url(#f1nyfbzm83wleq)" height="124.8281" id="Transport" style="stroke: #A80036; stroke-width: 1.5;" width="627" x="1890.5" y="356"/><ellipse cx="2170.75" cy="372" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M2173.0938,367.6719 C2172.1563,367.2344 2171.5625,367.0938 2170.6875,367.0938 C2168.0625,367.0938 2166.0625,369.1719 2166.0625,371.8906 L2166.0625,373.0156 C2166.0625,375.5938 2168.1719,377.4844 2171.0625,377.4844 C2172.2813,377.4844 2173.4375,377.1875 2174.1875,376.6406 C2174.7656,376.2344 2175.0938,375.7813 2175.0938,375.3906 C2175.0938,374.9375 2174.7031,374.5469 2174.2344,374.5469 C2174.0156,374.5469 2173.8125,374.625 2173.625,374.8125 C2173.1719,375.2969 2173.1719,375.2969 2172.9844,375.3906 C2172.5625,375.6563 2171.875,375.7813 2171.1094,375.7813 C2169.0625,375.7813 2167.7656,374.6875 2167.7656,372.9844 L2167.7656,371.8906 C2167.7656,370.1094 2169.0156,368.7969 2170.75,368.7969 C2171.3281,368.7969 2171.9375,368.9531 2172.4063,369.2031 C2172.8906,369.4844 2173.0625,369.7031 2173.1563,370.1094 C2173.2188,370.5156 2173.25,370.6406 2173.3906,370.7656 C2173.5313,370.9063 2173.7656,371.0156 2173.9844,371.0156 C2174.25,371.0156 2174.5156,370.875 2174.6875,370.6563 C2174.7969,370.5 2174.8281,370.3125 2174.8281,369.8906 L2174.8281,368.4688 C2174.8281,368.0313 2174.8125,367.9063 2174.7188,367.75 C2174.5625,367.4844 2174.2813,367.3438 2173.9844,367.3438 C2173.6875,367.3438 2173.4844,367.4375 2173.2656,367.75 L2173.0938,367.6719 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="58" x="2191.25" y="376.1543">Transport</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1891.5" x2="2516.5" y1="388" y2="388"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="556" x="1896.5" y="402.2104">Transport表示mediasoupclient端的WebRtcTransport，和mediasoup服务端WebRtcTransport一一对应。</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="615" x="1896.5" y="415.0151">WebRtcTransport在媒体级别将mediasoupclient设备与mediasoup router连接，并允许发送媒体（通过Producer实例）</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="190" x="1896.5" y="427.8198">或接收媒体（通过Consumer实例）。</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="0" x="1900.5" y="440.6245"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="406" x="1896.5" y="453.4292">在内部，实际封装的是一个WebRTC RTCPeerConnection实例（通过Handler）</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="428" x="1896.5" y="466.2339">https://mediasoup.org/documentation/v3/libmediasoupclient/api/#Transport</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="1891.5" x2="2516.5" y1="472.8281" y2="472.8281"/><!--MD5=[afc1041e953655e2c6b02bc4ba02c92d]
class SendTransport--><rect codeLine="68" fill="#FEFECE" filter="url(#f1nyfbzm83wleq)" height="86.4141" id="SendTransport" style="stroke: #A80036; stroke-width: 1.5;" width="470" x="1181" y="209"/><ellipse cx="1367.25" cy="225" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1369.5938,220.6719 C1368.6563,220.2344 1368.0625,220.0938 1367.1875,220.0938 C1364.5625,220.0938 1362.5625,222.1719 1362.5625,224.8906 L1362.5625,226.0156 C1362.5625,228.5938 1364.6719,230.4844 1367.5625,230.4844 C1368.7813,230.4844 1369.9375,230.1875 1370.6875,229.6406 C1371.2656,229.2344 1371.5938,228.7813 1371.5938,228.3906 C1371.5938,227.9375 1371.2031,227.5469 1370.7344,227.5469 C1370.5156,227.5469 1370.3125,227.625 1370.125,227.8125 C1369.6719,228.2969 1369.6719,228.2969 1369.4844,228.3906 C1369.0625,228.6563 1368.375,228.7813 1367.6094,228.7813 C1365.5625,228.7813 1364.2656,227.6875 1364.2656,225.9844 L1364.2656,224.8906 C1364.2656,223.1094 1365.5156,221.7969 1367.25,221.7969 C1367.8281,221.7969 1368.4375,221.9531 1368.9063,222.2031 C1369.3906,222.4844 1369.5625,222.7031 1369.6563,223.1094 C1369.7188,223.5156 1369.75,223.6406 1369.8906,223.7656 C1370.0313,223.9063 1370.2656,224.0156 1370.4844,224.0156 C1370.75,224.0156 1371.0156,223.875 1371.1875,223.6563 C1371.2969,223.5 1371.3281,223.3125 1371.3281,222.8906 L1371.3281,221.4688 C1371.3281,221.0313 1371.3125,220.9063 1371.2188,220.75 C1371.0625,220.4844 1370.7813,220.3438 1370.4844,220.3438 C1370.1875,220.3438 1369.9844,220.4375 1369.7656,220.75 L1369.5938,220.6719 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="89" x="1387.75" y="229.1543">SendTransport</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1182" x2="1650" y1="241" y2="241"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="227" x="1187" y="255.2104">继承自Transport，表示发送媒体的Transport</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="170" x="1187" y="268.0151">可以创建Producer来生产媒体数据</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="458" x="1187" y="280.8198">https://mediasoup.org/documentation/v3/libmediasoupclient/api/#SendTransport</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="1182" x2="1650" y1="287.4141" y2="287.4141"/><!--MD5=[b11f54ebeb1333afcd30d3e6daccf219]
class RecvTransport--><rect codeLine="75" fill="#FEFECE" filter="url(#f1nyfbzm83wleq)" height="86.4141" id="RecvTransport" style="stroke: #A80036; stroke-width: 1.5;" width="468" x="2721" y="209"/><ellipse cx="2907.25" cy="225" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M2909.5938,220.6719 C2908.6563,220.2344 2908.0625,220.0938 2907.1875,220.0938 C2904.5625,220.0938 2902.5625,222.1719 2902.5625,224.8906 L2902.5625,226.0156 C2902.5625,228.5938 2904.6719,230.4844 2907.5625,230.4844 C2908.7813,230.4844 2909.9375,230.1875 2910.6875,229.6406 C2911.2656,229.2344 2911.5938,228.7813 2911.5938,228.3906 C2911.5938,227.9375 2911.2031,227.5469 2910.7344,227.5469 C2910.5156,227.5469 2910.3125,227.625 2910.125,227.8125 C2909.6719,228.2969 2909.6719,228.2969 2909.4844,228.3906 C2909.0625,228.6563 2908.375,228.7813 2907.6094,228.7813 C2905.5625,228.7813 2904.2656,227.6875 2904.2656,225.9844 L2904.2656,224.8906 C2904.2656,223.1094 2905.5156,221.7969 2907.25,221.7969 C2907.8281,221.7969 2908.4375,221.9531 2908.9063,222.2031 C2909.3906,222.4844 2909.5625,222.7031 2909.6563,223.1094 C2909.7188,223.5156 2909.75,223.6406 2909.8906,223.7656 C2910.0313,223.9063 2910.2656,224.0156 2910.4844,224.0156 C2910.75,224.0156 2911.0156,223.875 2911.1875,223.6563 C2911.2969,223.5 2911.3281,223.3125 2911.3281,222.8906 L2911.3281,221.4688 C2911.3281,221.0313 2911.3125,220.9063 2911.2188,220.75 C2911.0625,220.4844 2910.7813,220.3438 2910.4844,220.3438 C2910.1875,220.3438 2909.9844,220.4375 2909.7656,220.75 L2909.5938,220.6719 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="87" x="2927.75" y="229.1543">RecvTransport</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="2722" x2="3188" y1="241" y2="241"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="227" x="2727" y="255.2104">继承自Transport，表示接收媒体的Transport</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="179" x="2727" y="268.0151">可以创建Consumer来处理媒体数据</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="456" x="2727" y="280.8198">https://mediasoup.org/documentation/v3/libmediasoupclient/api/#RecvTransport</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="2722" x2="3188" y1="287.4141" y2="287.4141"/><!--MD5=[09e3160644ea82bed9dc2bfdc7bfe5c8]
class Producer--><rect codeLine="82" fill="#FEFECE" filter="url(#f1nyfbzm83wleq)" height="86.4141" id="Producer" style="stroke: #A80036; stroke-width: 1.5;" width="436" x="7" y="375.5"/><ellipse cx="193.75" cy="391.5" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M196.0938,387.1719 C195.1563,386.7344 194.5625,386.5938 193.6875,386.5938 C191.0625,386.5938 189.0625,388.6719 189.0625,391.3906 L189.0625,392.5156 C189.0625,395.0938 191.1719,396.9844 194.0625,396.9844 C195.2813,396.9844 196.4375,396.6875 197.1875,396.1406 C197.7656,395.7344 198.0938,395.2813 198.0938,394.8906 C198.0938,394.4375 197.7031,394.0469 197.2344,394.0469 C197.0156,394.0469 196.8125,394.125 196.625,394.3125 C196.1719,394.7969 196.1719,394.7969 195.9844,394.8906 C195.5625,395.1563 194.875,395.2813 194.1094,395.2813 C192.0625,395.2813 190.7656,394.1875 190.7656,392.4844 L190.7656,391.3906 C190.7656,389.6094 192.0156,388.2969 193.75,388.2969 C194.3281,388.2969 194.9375,388.4531 195.4063,388.7031 C195.8906,388.9844 196.0625,389.2031 196.1563,389.6094 C196.2188,390.0156 196.25,390.1406 196.3906,390.2656 C196.5313,390.4063 196.7656,390.5156 196.9844,390.5156 C197.25,390.5156 197.5156,390.375 197.6875,390.1563 C197.7969,390 197.8281,389.8125 197.8281,389.3906 L197.8281,387.9688 C197.8281,387.5313 197.8125,387.4063 197.7188,387.25 C197.5625,386.9844 197.2813,386.8438 196.9844,386.8438 C196.6875,386.8438 196.4844,386.9375 196.2656,387.25 L196.0938,387.1719 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="54" x="214.25" y="395.6543">Producer</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="8" x2="442" y1="407.5" y2="407.5"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="372" x="13" y="421.7104">表示通过WebRTC transport传输到mediasoup router的音频/视频生产者</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="400" x="13" y="434.5151">主要是通过持有MediaStreamTrackInterface来控制媒体的发送/暂停/恢复/关闭</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="424" x="13" y="447.3198">https://mediasoup.org/documentation/v3/libmediasoupclient/api/#Producer</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="8" x2="442" y1="453.9141" y2="453.9141"/><!--MD5=[8d89d815a06d1b814e3bf2c5ba5b5215]
class DataProducer--><rect codeLine="89" fill="#FEFECE" filter="url(#f1nyfbzm83wleq)" height="86.4141" id="DataProducer" style="stroke: #A80036; stroke-width: 1.5;" width="463" x="478.5" y="375.5"/><ellipse cx="665.25" cy="391.5" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M667.5938,387.1719 C666.6563,386.7344 666.0625,386.5938 665.1875,386.5938 C662.5625,386.5938 660.5625,388.6719 660.5625,391.3906 L660.5625,392.5156 C660.5625,395.0938 662.6719,396.9844 665.5625,396.9844 C666.7813,396.9844 667.9375,396.6875 668.6875,396.1406 C669.2656,395.7344 669.5938,395.2813 669.5938,394.8906 C669.5938,394.4375 669.2031,394.0469 668.7344,394.0469 C668.5156,394.0469 668.3125,394.125 668.125,394.3125 C667.6719,394.7969 667.6719,394.7969 667.4844,394.8906 C667.0625,395.1563 666.375,395.2813 665.6094,395.2813 C663.5625,395.2813 662.2656,394.1875 662.2656,392.4844 L662.2656,391.3906 C662.2656,389.6094 663.5156,388.2969 665.25,388.2969 C665.8281,388.2969 666.4375,388.4531 666.9063,388.7031 C667.3906,388.9844 667.5625,389.2031 667.6563,389.6094 C667.7188,390.0156 667.75,390.1406 667.8906,390.2656 C668.0313,390.4063 668.2656,390.5156 668.4844,390.5156 C668.75,390.5156 669.0156,390.375 669.1875,390.1563 C669.2969,390 669.3281,389.8125 669.3281,389.3906 L669.3281,387.9688 C669.3281,387.5313 669.3125,387.4063 669.2188,387.25 C669.0625,386.9844 668.7813,386.8438 668.4844,386.8438 C668.1875,386.8438 667.9844,386.9375 667.7656,387.25 L667.5938,387.1719 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="81" x="685.75" y="395.6543">DataProducer</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="479.5" x2="940.5" y1="407.5" y2="407.5"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="368" x="484.5" y="421.7104">表示通过WebRTC transport传输到mediasoup router的普通数据生产者</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="290" x="484.5" y="434.5151">主要通过持有DataChannelInterface实现了数据的发送等</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="451" x="484.5" y="447.3198">https://mediasoup.org/documentation/v3/libmediasoupclient/api/#DataProducer</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="479.5" x2="940.5" y1="453.9141" y2="453.9141"/><!--MD5=[d042d396968de1dc58a9b4346b192859]
class SendHandler--><rect codeLine="96" fill="#FEFECE" filter="url(#f1nyfbzm83wleq)" height="86.4141" id="SendHandler" style="stroke: #A80036; stroke-width: 1.5;" width="878" x="977" y="375.5"/><ellipse cx="1372.75" cy="391.5" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1375.0938,387.1719 C1374.1563,386.7344 1373.5625,386.5938 1372.6875,386.5938 C1370.0625,386.5938 1368.0625,388.6719 1368.0625,391.3906 L1368.0625,392.5156 C1368.0625,395.0938 1370.1719,396.9844 1373.0625,396.9844 C1374.2813,396.9844 1375.4375,396.6875 1376.1875,396.1406 C1376.7656,395.7344 1377.0938,395.2813 1377.0938,394.8906 C1377.0938,394.4375 1376.7031,394.0469 1376.2344,394.0469 C1376.0156,394.0469 1375.8125,394.125 1375.625,394.3125 C1375.1719,394.7969 1375.1719,394.7969 1374.9844,394.8906 C1374.5625,395.1563 1373.875,395.2813 1373.1094,395.2813 C1371.0625,395.2813 1369.7656,394.1875 1369.7656,392.4844 L1369.7656,391.3906 C1369.7656,389.6094 1371.0156,388.2969 1372.75,388.2969 C1373.3281,388.2969 1373.9375,388.4531 1374.4063,388.7031 C1374.8906,388.9844 1375.0625,389.2031 1375.1563,389.6094 C1375.2188,390.0156 1375.25,390.1406 1375.3906,390.2656 C1375.5313,390.4063 1375.7656,390.5156 1375.9844,390.5156 C1376.25,390.5156 1376.5156,390.375 1376.6875,390.1563 C1376.7969,390 1376.8281,389.8125 1376.8281,389.3906 L1376.8281,387.9688 C1376.8281,387.5313 1376.8125,387.4063 1376.7188,387.25 C1376.5625,386.9844 1376.2813,386.8438 1375.9844,386.8438 C1375.6875,386.8438 1375.4844,386.9375 1375.2656,387.25 L1375.0938,387.1719 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="78" x="1393.25" y="395.6543">SendHandler</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="978" x2="1854" y1="407.5" y2="407.5"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="458" x="983" y="421.7104">创建offer类型的PeerConnectionInterface，返回RtpSenderInterface和rtpParameters</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="978" x2="1854" y1="428.3047" y2="428.3047"/><ellipse cx="988" cy="439.3047" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="852" x="997" y="442.5151">Send() 给PeerConnection添加MediaStreamTrackInterface，创建offer，设置本地/远端sdp信息(远端sdp信息也是在本地创建的，之前从服务端拉取了必要的远端信息)</text><ellipse cx="988" cy="452.1094" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="742" x="997" y="455.3198">SendDataChannel() 创建DataChannel，创建offer，设置本地/远端sdp信息(远端sdp信息也是在本地创建的，之前从服务端拉取了必要的远端信息)</text><!--MD5=[67ea9f8eb7ab97465d83c225b092f5fe]
class Consumer--><rect codeLine="103" fill="#FEFECE" filter="url(#f1nyfbzm83wleq)" height="86.4141" id="Consumer" style="stroke: #A80036; stroke-width: 1.5;" width="445" x="3392.5" y="375.5"/><ellipse cx="3580.25" cy="391.5" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M3582.5938,387.1719 C3581.6563,386.7344 3581.0625,386.5938 3580.1875,386.5938 C3577.5625,386.5938 3575.5625,388.6719 3575.5625,391.3906 L3575.5625,392.5156 C3575.5625,395.0938 3577.6719,396.9844 3580.5625,396.9844 C3581.7813,396.9844 3582.9375,396.6875 3583.6875,396.1406 C3584.2656,395.7344 3584.5938,395.2813 3584.5938,394.8906 C3584.5938,394.4375 3584.2031,394.0469 3583.7344,394.0469 C3583.5156,394.0469 3583.3125,394.125 3583.125,394.3125 C3582.6719,394.7969 3582.6719,394.7969 3582.4844,394.8906 C3582.0625,395.1563 3581.375,395.2813 3580.6094,395.2813 C3578.5625,395.2813 3577.2656,394.1875 3577.2656,392.4844 L3577.2656,391.3906 C3577.2656,389.6094 3578.5156,388.2969 3580.25,388.2969 C3580.8281,388.2969 3581.4375,388.4531 3581.9063,388.7031 C3582.3906,388.9844 3582.5625,389.2031 3582.6563,389.6094 C3582.7188,390.0156 3582.75,390.1406 3582.8906,390.2656 C3583.0313,390.4063 3583.2656,390.5156 3583.4844,390.5156 C3583.75,390.5156 3584.0156,390.375 3584.1875,390.1563 C3584.2969,390 3584.3281,389.8125 3584.3281,389.3906 L3584.3281,387.9688 C3584.3281,387.5313 3584.3125,387.4063 3584.2188,387.25 C3584.0625,386.9844 3583.7813,386.8438 3583.4844,386.8438 C3583.1875,386.8438 3582.9844,386.9375 3582.7656,387.25 L3582.5938,387.1719 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="61" x="3600.75" y="395.6543">Consumer</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="3393.5" x2="3836.5" y1="407.5" y2="407.5"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="405" x="3398.5" y="421.7104">表示mediasoup router通过WebRTC transport传输到本地的音频/视频的消费者</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="400" x="3398.5" y="434.5151">主要是通过持有MediaStreamTrackInterface来控制媒体的接收/暂停/恢复/关闭</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="433" x="3398.5" y="447.3198">https://mediasoup.org/documentation/v3/libmediasoupclient/api/#Consumer</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="3393.5" x2="3836.5" y1="453.9141" y2="453.9141"/><!--MD5=[68fc04c9a09f80ebce21468a47532d2d]
class DataConsumer--><rect codeLine="110" fill="#FEFECE" filter="url(#f1nyfbzm83wleq)" height="86.4141" id="DataConsumer" style="stroke: #A80036; stroke-width: 1.5;" width="472" x="3873" y="375.5"/><ellipse cx="4060.75" cy="391.5" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M4063.0938,387.1719 C4062.1563,386.7344 4061.5625,386.5938 4060.6875,386.5938 C4058.0625,386.5938 4056.0625,388.6719 4056.0625,391.3906 L4056.0625,392.5156 C4056.0625,395.0938 4058.1719,396.9844 4061.0625,396.9844 C4062.2813,396.9844 4063.4375,396.6875 4064.1875,396.1406 C4064.7656,395.7344 4065.0938,395.2813 4065.0938,394.8906 C4065.0938,394.4375 4064.7031,394.0469 4064.2344,394.0469 C4064.0156,394.0469 4063.8125,394.125 4063.625,394.3125 C4063.1719,394.7969 4063.1719,394.7969 4062.9844,394.8906 C4062.5625,395.1563 4061.875,395.2813 4061.1094,395.2813 C4059.0625,395.2813 4057.7656,394.1875 4057.7656,392.4844 L4057.7656,391.3906 C4057.7656,389.6094 4059.0156,388.2969 4060.75,388.2969 C4061.3281,388.2969 4061.9375,388.4531 4062.4063,388.7031 C4062.8906,388.9844 4063.0625,389.2031 4063.1563,389.6094 C4063.2188,390.0156 4063.25,390.1406 4063.3906,390.2656 C4063.5313,390.4063 4063.7656,390.5156 4063.9844,390.5156 C4064.25,390.5156 4064.5156,390.375 4064.6875,390.1563 C4064.7969,390 4064.8281,389.8125 4064.8281,389.3906 L4064.8281,387.9688 C4064.8281,387.5313 4064.8125,387.4063 4064.7188,387.25 C4064.5625,386.9844 4064.2813,386.8438 4063.9844,386.8438 C4063.6875,386.8438 4063.4844,386.9375 4063.2656,387.25 L4063.0938,387.1719 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="88" x="4081.25" y="395.6543">DataConsumer</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="3874" x2="4344" y1="407.5" y2="407.5"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="390" x="3879" y="421.7104">表示mediasoup router通过WebRTC transport传输到本地的普通数据消费者</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="290" x="3879" y="434.5151">主要通过持有DataChannelInterface实现了数据的发送等</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="460" x="3879" y="447.3198">https://mediasoup.org/documentation/v3/libmediasoupclient/api/#DataConsumer</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="3874" x2="4344" y1="453.9141" y2="453.9141"/><!--MD5=[e9001a63f98a286c4ccade3de8b4c9f7]
class PeerConnection--><rect codeLine="117" fill="#FEFECE" filter="url(#f1nyfbzm83wleq)" height="184.0469" id="PeerConnection" style="stroke: #A80036; stroke-width: 1.5;" width="563" x="2611.5" y="542"/><ellipse cx="2841.75" cy="558" fill="#ADD1B2" rx="11" ry="11" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M2844.0938,553.6719 C2843.1563,553.2344 2842.5625,553.0938 2841.6875,553.0938 C2839.0625,553.0938 2837.0625,555.1719 2837.0625,557.8906 L2837.0625,559.0156 C2837.0625,561.5938 2839.1719,563.4844 2842.0625,563.4844 C2843.2813,563.4844 2844.4375,563.1875 2845.1875,562.6406 C2845.7656,562.2344 2846.0938,561.7813 2846.0938,561.3906 C2846.0938,560.9375 2845.7031,560.5469 2845.2344,560.5469 C2845.0156,560.5469 2844.8125,560.625 2844.625,560.8125 C2844.1719,561.2969 2844.1719,561.2969 2843.9844,561.3906 C2843.5625,561.6563 2842.875,561.7813 2842.1094,561.7813 C2840.0625,561.7813 2838.7656,560.6875 2838.7656,558.9844 L2838.7656,557.8906 C2838.7656,556.1094 2840.0156,554.7969 2841.75,554.7969 C2842.3281,554.7969 2842.9375,554.9531 2843.4063,555.2031 C2843.8906,555.4844 2844.0625,555.7031 2844.1563,556.1094 C2844.2188,556.5156 2844.25,556.6406 2844.3906,556.7656 C2844.5313,556.9063 2844.7656,557.0156 2844.9844,557.0156 C2845.25,557.0156 2845.5156,556.875 2845.6875,556.6563 C2845.7969,556.5 2845.8281,556.3125 2845.8281,555.8906 L2845.8281,554.4688 C2845.8281,554.0313 2845.8125,553.9063 2845.7188,553.75 C2845.5625,553.4844 2845.2813,553.3438 2844.9844,553.3438 C2844.6875,553.3438 2844.4844,553.4375 2844.2656,553.75 L2844.0938,553.6719 Z "/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="94" x="2862.25" y="562.1543">PeerConnection</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="2612.5" x2="3173.5" y1="574" y2="574"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="271" x="2617.5" y="588.2104">对webrtc PeerConnectionInterface常用操作的封装</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="2612.5" x2="3173.5" y1="594.8047" y2="594.8047"/><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="2619.5" y="602.8047"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="404" x="2631.5" y="609.0151">PeerConnectionFactoryInterface 负责创建PeerConnectionInterface的工厂</text><rect fill="none" height="6" style="stroke: #C82930; stroke-width: 1.0;" width="6" x="2619.5" y="615.6094"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="325" x="2631.5" y="621.8198">PeerConnectionInterface pc PeerConnectionInterface实例</text><line style="stroke: #A80036; stroke-width: 1.0;" x1="2612.5" x2="3173.5" y1="628.4141" y2="628.4141"/><ellipse cx="2622.5" cy="639.4141" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="339" x="2631.5" y="642.6245">Get/SetConfiguration() 获取设置PeerConnectionInterface配置</text><ellipse cx="2622.5" cy="652.2188" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="463" x="2631.5" y="655.4292">CreateOffer() webrtc同名接口封装（将SessionDescriptionInterface转换为string返回）</text><ellipse cx="2622.5" cy="665.0234" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="115" x="2631.5" y="668.2339">CreateAnswer() 同上</text><ellipse cx="2622.5" cy="677.8281" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="537" x="2631.5" y="681.0386">Set/GetLocalDescription() 同上（封装了string格式的sdp信息和SessionDescriptionInterface的转换）</text><ellipse cx="2622.5" cy="690.6328" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="188" x="2631.5" y="693.8433">Set/GetRemoteDescription() 同上</text><ellipse cx="2622.5" cy="703.4375" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="205" x="2631.5" y="706.6479">AddTransceiver() webrtc同名接口封装</text><ellipse cx="2622.5" cy="716.2422" fill="#84BE84" rx="3" ry="3" style="stroke: #038048; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="229" x="2631.5" y="719.4526">CreateDataChannel() webrtc同名接口封装</text><!--MD5=[b0d1817b84dddaf99500fb3a43e1ab88]
reverse link Handler to PeerConnection--><path codeLine="132" d="M2589.63,634 C2596.9,634 2604.18,634 2611.46,634 " fill="none" id="Handler-backto-PeerConnection" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="2576.53,634,2582.53,638,2588.53,634,2582.53,630,2576.53,634" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[abd8ec4a4ca416406d02d92247e96497]
reverse link Handler to RemoteSdp--><path codeLine="133" d="M2372,707.37 C2372,733.44 2372,762.417 2372,786.789 " fill="none" id="Handler-backto-RemoteSdp" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="2372,694.041,2368,700.041,2372,706.041,2376,700.041,2372,694.041" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[07ad5891a1a3b0550c3149250549d000]
link SendHandler to Handler--><path codeLine="134" d="M1604.3,461.553 C1760.28,496.388 1982.34,545.979 2147.54,582.873 " fill="none" id="SendHandler-to-Handler" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="2149.15,576.059,2167.14,587.25,2146.1,589.723,2149.15,576.059" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[ced44fadbfbd193328ecc745d67cef68]
link RecvHandler to Handler--><path codeLine="135" d="M2824.82,461.513 C2755.86,484.314 2669.93,513.585 2594,542 C2573.59,549.639 2552.24,557.958 2531.2,566.358 " fill="none" id="RecvHandler-to-Handler" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="2533.58,572.947,2512.41,573.912,2528.36,559.957,2533.58,572.947" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[b784001459aedf022a946827d4584eb7]
reverse link MediaSection to AnswerMediaSection--><path codeLine="136" d="M2243.57,1081.216 C2208.29,1098.857 2171.27,1117.3661 2140.37,1132.8162 " fill="none" id="MediaSection-backto-AnswerMediaSection" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="2240.8,1074.774,2261.82,1072.09,2247.06,1087.296,2240.8,1074.774" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[2e0769c4b7d440775a11be20282c481b]
reverse link MediaSection to OfferMediaSection--><path codeLine="137" d="M2500.85,1081.216 C2536.25,1098.857 2573.39,1117.3661 2604.39,1132.8162 " fill="none" id="MediaSection-backto-OfferMediaSection" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="2497.32,1087.276,2482.54,1072.09,2503.57,1074.746,2497.32,1087.276" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[5f048ab29e261887fe07c6fe01bf03d1]
reverse link RemoteSdp to MediaSection--><path codeLine="138" d="M2372,912.093 C2372,927.917 2372,944.572 2372,959.763 " fill="none" id="RemoteSdp-backto-MediaSection" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="2372,899.047,2368,905.047,2372,911.047,2376,905.047,2372,899.047" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[4676b547ece1985dcb8811da2801dc44]
link SendTransport to Transport--><path codeLine="139" d="M1617.4,295.043 C1700.11,312.31 1797.84,332.713 1889.58,351.862 " fill="none" id="SendTransport-to-Transport" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="1891.21,345.052,1909.36,355.991,1888.35,358.756,1891.21,345.052" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[835438291c22556ed0f9606f239efedb]
link RecvTransport to Transport--><path codeLine="140" d="M2763.06,295.043 C2684.48,312.256 2591.67,332.584 2504.49,351.681 " fill="none" id="RecvTransport-to-Transport" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="none" points="2505.84,358.55,2484.81,355.991,2502.85,344.874,2505.84,358.55" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[456aa6cb16a33c73af6f5030d953a959]
reverse link SendTransport to SendHandler--><path codeLine="141" d="M1416,308.518 C1416,330.332 1416,354.962 1416,375.281 " fill="none" id="SendTransport-backto-SendHandler" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="1416,295.363,1412,301.363,1416,307.363,1420,301.363,1416,295.363" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[b22ea9dbd553b9cba1728c201b4a683f]
reverse link SendTransport to Producer--><path codeLine="142" d="M1167.38,269.713 C973.795,285.156 698.914,312.417 461,356 C432.263,361.264 401.873,368.159 372.807,375.422 " fill="none" id="SendTransport-backto-Producer" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="1180.6,268.667,1174.3023,265.1543,1168.6376,269.6165,1174.9353,273.1292,1180.6,268.667" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[ecb256fde3eceaa2a639ad53012c7cb7]
reverse link SendTransport to DataProducer--><path codeLine="143" d="M1212.31,297.972 C1133.15,315.695 1041.76,336.456 959,356 C932.89,362.166 905.278,368.836 878.317,375.432 " fill="none" id="SendTransport-backto-DataProducer" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="1225.41,295.041,1218.6806,292.4497,1213.7004,297.6648,1220.4298,300.2561,1225.41,295.041" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[366b2c688a68e36f2fb372c1f51fbe5d]
reverse link RecvTransport to RecvHandler--><path codeLine="144" d="M2955,308.518 C2955,330.332 2955,354.962 2955,375.281 " fill="none" id="RecvTransport-backto-RecvHandler" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="2955,295.363,2951,301.363,2955,307.363,2959,301.363,2955,295.363" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[7a645845c3bf79136d72a0384d2c98b7]
reverse link RecvTransport to Consumer--><path codeLine="145" d="M3140.34,298.189 C3213.21,316.053 3297.57,336.854 3374,356 C3398.92,362.243 3425.28,368.906 3451.06,375.457 " fill="none" id="RecvTransport-backto-Consumer" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="3127.34,295.004,3132.2188,300.3141,3138.9969,297.8529,3134.1181,292.5428,3127.34,295.004" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[979c3d51bdfa22997eae57a3cc5cb617]
reverse link RecvTransport to DataConsumer--><path codeLine="146" d="M3202.46,273.02 C3383.93,289.714 3635.84,317.081 3855,356 C3885.38,361.395 3917.54,368.262 3948.39,375.44 " fill="none" id="RecvTransport-backto-DataConsumer" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#A80036" points="3189.24,271.812,3194.8502,276.3426,3201.19,272.9065,3195.5798,268.3759,3189.24,271.812" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[01395fde216820bfddbbb093d4786aeb]
link Device to SendTransport--><path codeLine="148" d="M2139.22,114.02 C1987.06,142.84 1788.56,180.44 1638.01,208.95 " fill="none" id="Device-SendTransport" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="26" x="1865" y="175.0669">创建</text><!--MD5=[db59fe90bed7ce6ef2ff34496b051c29]
link Device to RecvTransport--><path codeLine="149" d="M2569.03,132.11 C2651.26,157.44 2744.38,186.13 2818.56,208.973 " fill="none" id="Device-RecvTransport" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="26" x="2716" y="175.0669">创建</text><!--MD5=[6ccbdc98b2fdb630815cbcd80297f0bd]
@startuml
class Device {
    代表连接到mediasoup router以发送和/或接收媒体的端点。
    这是C ++客户端应用程序的切入点。
    主要功能是创建SendTransport/RecvTransport, 加载服务端rtp能力，生成本地rtp能力等
    https://mediasoup.org/documentation/v3/libmediasoupclient/api/#Device
    - - -
    + CreateSendTransport()
    + CreateRecvTransport()
}

class Handler {
    对PeerConnection进一步封装，区分offer/answer PeerConnection
    - - -
    + GetNativeRtpCapabilities() 通过临时创建一个offer的方式获得本地rtp能力
    + UpdateIceServers() 重新设置PeerConnection的ice server
    + Close() 关闭PeerConnection
    - - -
    - SetupTransport() 更新sdp信息中 dtls传输角色（client/server）
}

class RecvHandler {
    创建answer类型的PeerConnectionInterface，返回RtpReceiverInterface和MediaStreamTrackInterface
    - - -
    + Receive() 根据参数使用remoteSdp创建远端sdp，并通过SetRemoteDescription设置到pc，创建answer，获取transceiver和track，设置本地sdp信息
    + ReceiveDataChannel() 创建DataChannel，创建answer，设置本地/远端sdp信息
}

class MediaSection {
    媒体部分json数据的封装
    主要是对json格式的iceParameters（user&password）和iceCandidates的保存和便捷操作
    - - -
    + GetMid()
    + SetIceParameters()
    + SetDtlsRole()
}

class AnswerMediaSection {
    应答媒体部分json数据的封装
    主要是对json格式的iceParameters/iceCandidates/dtlsParameters/sctpParameters/codecOptions的保存
    - - -
}

class OfferMediaSection {
    应答媒体部分json数据的封装
    主要是对json格式的iceParameters/iceCandidates/dtlsParameters/sctpParameters/codecOptions的保存
    - - -
}

class RemoteSdp {
    保存json格式的sdp信息，管理MediaSection
    Remote表示RemoteSdp存储的是对端pc的sdp信息，最终RemoteSdp被用来本地PeerConnectionInterface::SetRemoteDescription
    - - -
    + Send()创建一个AnswerMediaSection
    + Receive()创建一个OfferMediaSection 
    + GetSdp() 获取sdp信息的json对象
}

class Transport {
    Transport表示mediasoupclient端的WebRtcTransport，和mediasoup服务端WebRtcTransport一一对应。
    WebRtcTransport在媒体级别将mediasoupclient设备与mediasoup router连接，并允许发送媒体（通过Producer实例）
    或接收媒体（通过Consumer实例）。

    在内部，实际封装的是一个WebRTC RTCPeerConnection实例（通过Handler）
    https://mediasoup.org/documentation/v3/libmediasoupclient/api/#Transport
    - - -
}

class SendTransport {
    继承自Transport，表示发送媒体的Transport
    可以创建Producer来生产媒体数据
    https://mediasoup.org/documentation/v3/libmediasoupclient/api/#SendTransport
    - - -
}

class RecvTransport {
    继承自Transport，表示接收媒体的Transport
    可以创建Consumer来处理媒体数据
    https://mediasoup.org/documentation/v3/libmediasoupclient/api/#RecvTransport
    - - -
}

class Producer {
    表示通过WebRTC transport传输到mediasoup router的音频/视频生产者
    主要是通过持有MediaStreamTrackInterface来控制媒体的发送/暂停/恢复/关闭
    https://mediasoup.org/documentation/v3/libmediasoupclient/api/#Producer
    - - -
}

class DataProducer {
    表示通过WebRTC transport传输到mediasoup router的普通数据生产者
    主要通过持有DataChannelInterface实现了数据的发送等
    https://mediasoup.org/documentation/v3/libmediasoupclient/api/#DataProducer
    - - -
}

class SendHandler {
    创建offer类型的PeerConnectionInterface，返回RtpSenderInterface和rtpParameters
    - - -
    + Send() 给PeerConnection添加MediaStreamTrackInterface，创建offer，设置本地/远端sdp信息(远端sdp信息也是在本地创建的，之前从服务端拉取了必要的远端信息)
    + SendDataChannel() 创建DataChannel，创建offer，设置本地/远端sdp信息(远端sdp信息也是在本地创建的，之前从服务端拉取了必要的远端信息)
}

class Consumer {
    表示mediasoup router通过WebRTC transport传输到本地的音频/视频的消费者
    主要是通过持有MediaStreamTrackInterface来控制媒体的接收/暂停/恢复/关闭
    https://mediasoup.org/documentation/v3/libmediasoupclient/api/#Consumer
    - - -
}

class DataConsumer {
    表示mediasoup router通过WebRTC transport传输到本地的普通数据消费者
    主要通过持有DataChannelInterface实现了数据的发送等
    https://mediasoup.org/documentation/v3/libmediasoupclient/api/#DataConsumer
    - - -
}

class PeerConnection {
    对webrtc PeerConnectionInterface常用操作的封装
    - - -
    - PeerConnectionFactoryInterface 负责创建PeerConnectionInterface的工厂 
    - PeerConnectionInterface pc PeerConnectionInterface实例
    - - -
    + Get/SetConfiguration() 获取设置PeerConnectionInterface配置
    + CreateOffer() webrtc同名接口封装（将SessionDescriptionInterface转换为string返回）
    + CreateAnswer() 同上
    + Set/GetLocalDescription() 同上（封装了string格式的sdp信息和SessionDescriptionInterface的转换）
    + Set/GetRemoteDescription() 同上
    + AddTransceiver() webrtc同名接口封装
    + CreateDataChannel() webrtc同名接口封装
}

Handler *-right- PeerConnection
Handler *- - RemoteSdp
SendHandler -down-|> Handler
RecvHandler -down-|> Handler
AnswerMediaSection -up-|> MediaSection
OfferMediaSection -up-|> MediaSection
RemoteSdp *-down- MediaSection 
SendTransport - -|> Transport
RecvTransport - -|> Transport
SendTransport *- - SendHandler
SendTransport *- - Producer
SendTransport *- - DataProducer
RecvTransport *- - RecvHandler
RecvTransport *- - Consumer
RecvTransport *- - DataConsumer

Device - - SendTransport : 创建
Device - - RecvTransport : 创建
@enduml

PlantUML version 1.2020.20beta2(Unknown compile time)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>